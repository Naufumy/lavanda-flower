{% extends "shop/base.html" %}
{% block content %}
<div class="container cart-container">
    <h2 class="text-center">üõí –í–∞—à –∑–∞–∫–∞–∑</h2>
    {% if cart %}
        {% for item in cart %}
        <div class="cart-item">
            <div class="item-left">
                <img src="{{ item.flower.image.url }}" alt="{{ item.flower.name }}" class="cart-item-image">
                <div class="product-name">{{ item.flower.name }}</div>
            </div>

            <div class="item-right">
                <div class="quantity-controls">
                    <form action="{% url 'cart_add' item.flower.id %}" method="post">
                        {% csrf_token %}
                        <input type="hidden" name="quantity" value="{{ item.quantity|add:'-1' }}">
                        <input type="hidden" name="update" value="True">
                        <button type="submit" class="qty-btn">‚àí</button>
                    </form>
            
                    <span class="quantity">{{ item.quantity }}</span>
            
                    <form action="{% url 'cart_add' item.flower.id %}" method="post">
                        {% csrf_token %}
                        <input type="hidden" name="quantity" value="{{ item.quantity|add:'1' }}">
                        <input type="hidden" name="update" value="True">
                        <button type="submit" class="qty-btn">+</button>
                    </form>
                </div>
            
                <div class="unit-price">{{ item.price }} ‚ÇΩ / —à—Ç.</div>
            
                <div class="total-price">{{ item.total_price }} ‚ÇΩ</div>
            
                <form action="{% url 'cart_remove' item.flower.id %}" method="post">
                    {% csrf_token %}
                    <button type="submit" class="remove-btn">üóëÔ∏è</button>
                </form>
            </div>
            
        </div>
        {% endfor %}
        <p class="cart-total">–û–±—â–∞—è —Å—É–º–º–∞: {{ cart.get_total_price }} ‚ÇΩ</p>
        <div class="cart-buttons">
            <a href="{% url 'flower_list' %}" class="btn btn-secondary">–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å –ø–æ–∫—É–ø–∫–∏</a>
            <a href="{% url 'order_create' %}" class="btn btn-success">–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑</a>
        </div>
    {% else %}
        <p class="text-center">–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞</p>
    {% endif %}
</div>
{% endblock %}
